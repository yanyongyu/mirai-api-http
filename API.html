<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>API 文档参考 | mirai-api-http</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Mirai HTTP API (console) plugin">
    <link rel="preload" href="/assets/css/0.styles.f46ac581.css" as="style"><link rel="preload" href="/assets/js/app.d3dd7f88.js" as="script"><link rel="preload" href="/assets/js/2.09547494.js" as="script"><link rel="preload" href="/assets/js/6.24358ea8.js" as="script"><link rel="preload" href="/assets/js/3.1b65837f.js" as="script"><link rel="prefetch" href="/assets/js/10.36ea21fb.js"><link rel="prefetch" href="/assets/js/11.36d9e40a.js"><link rel="prefetch" href="/assets/js/12.d2794380.js"><link rel="prefetch" href="/assets/js/4.79e06109.js"><link rel="prefetch" href="/assets/js/5.ca660288.js"><link rel="prefetch" href="/assets/js/7.017fe42c.js"><link rel="prefetch" href="/assets/js/8.4614edb7.js"><link rel="prefetch" href="/assets/js/9.1a1e4949.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f46ac581.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active home-link"><img src="https://raw.githubusercontent.com/mamoe/mirai/dev/docs/mirai.png" alt="mirai-api-http" class="logo"> <span class="site-name">mirai-api-http</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          首页
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/API/">
          API
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/EventType/">
          事件类型
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/MessageType/">
          消息类型
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          其他
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/project-mirai/mirai-api-http" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API 文档参考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/API.html#状态码" title="状态码" class="sidebar-link">状态码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/API.html#获取插件信息" title="获取插件信息" class="sidebar-link">获取插件信息</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/API.html#认证与会话" title="认证与会话" class="sidebar-link">认证与会话</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#开始认证" title="开始认证" class="sidebar-link">开始认证</a></li><li class="sidebar-sub-header"><a href="/API.html#校验session" title="校验Session" class="sidebar-link">校验Session</a></li><li class="sidebar-sub-header"><a href="/API.html#释放session" title="释放Session" class="sidebar-link">释放Session</a></li></ul></li><li><a href="/API.html#消息发送与撤回" title="消息发送与撤回" class="sidebar-link">消息发送与撤回</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#发送好友消息" title="发送好友消息" class="sidebar-link">发送好友消息</a></li><li class="sidebar-sub-header"><a href="/API.html#发送临时会话消息" title="发送临时会话消息" class="sidebar-link">发送临时会话消息</a></li><li class="sidebar-sub-header"><a href="/API.html#发送群消息" title="发送群消息" class="sidebar-link">发送群消息</a></li><li class="sidebar-sub-header"><a href="/API.html#撤回消息" title="撤回消息" class="sidebar-link">撤回消息</a></li><li class="sidebar-sub-header"><a href="/API.html#发送图片消息-通过url" title="发送图片消息（通过URL）" class="sidebar-link">发送图片消息（通过URL）</a></li></ul></li><li><a href="/API.html#多媒体内容上传" title="多媒体内容上传" class="sidebar-link">多媒体内容上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#图片文件上传" title="图片文件上传" class="sidebar-link">图片文件上传</a></li><li class="sidebar-sub-header"><a href="/API.html#语音文件上传" title="语音文件上传" class="sidebar-link">语音文件上传</a></li><li class="sidebar-sub-header"><a href="/API.html#文件上传" title="文件上传" class="sidebar-link">文件上传</a></li></ul></li><li><a href="/API.html#接收消息与事件" title="接收消息与事件" class="sidebar-link">接收消息与事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#获取bot收到的消息和事件" title="获取Bot收到的消息和事件" class="sidebar-link">获取Bot收到的消息和事件</a></li><li class="sidebar-sub-header"><a href="/API.html#通过messageid获取一条被缓存的消息" title="通过messageId获取一条被缓存的消息" class="sidebar-link">通过messageId获取一条被缓存的消息</a></li><li class="sidebar-sub-header"><a href="/API.html#查看缓存的消息总数" title="查看缓存的消息总数" class="sidebar-link">查看缓存的消息总数</a></li><li class="sidebar-sub-header"><a href="/API.html#通过websocket" title="通过WebSocket" class="sidebar-link">通过WebSocket</a></li></ul></li><li><a href="/API.html#好友与群-成员-列表" title="好友与群(成员)列表" class="sidebar-link">好友与群(成员)列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#获取好友列表" title="获取好友列表" class="sidebar-link">获取好友列表</a></li><li class="sidebar-sub-header"><a href="/API.html#获取群列表" title="获取群列表" class="sidebar-link">获取群列表</a></li><li class="sidebar-sub-header"><a href="/API.html#获取群成员列表" title="获取群成员列表" class="sidebar-link">获取群成员列表</a></li></ul></li><li><a href="/API.html#群管理" title="群管理" class="sidebar-link">群管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#禁言群成员" title="禁言群成员" class="sidebar-link">禁言群成员</a></li><li class="sidebar-sub-header"><a href="/API.html#解除群成员禁言" title="解除群成员禁言" class="sidebar-link">解除群成员禁言</a></li><li class="sidebar-sub-header"><a href="/API.html#移除群成员" title="移除群成员" class="sidebar-link">移除群成员</a></li><li class="sidebar-sub-header"><a href="/API.html#退出群聊" title="退出群聊" class="sidebar-link">退出群聊</a></li><li class="sidebar-sub-header"><a href="/API.html#全体禁言" title="全体禁言" class="sidebar-link">全体禁言</a></li><li class="sidebar-sub-header"><a href="/API.html#解除全体禁言" title="解除全体禁言" class="sidebar-link">解除全体禁言</a></li><li class="sidebar-sub-header"><a href="/API.html#获取群设置" title="获取群设置" class="sidebar-link">获取群设置</a></li><li class="sidebar-sub-header"><a href="/API.html#修改群设置" title="修改群设置" class="sidebar-link">修改群设置</a></li><li class="sidebar-sub-header"><a href="/API.html#获取群员资料" title="获取群员资料" class="sidebar-link">获取群员资料</a></li><li class="sidebar-sub-header"><a href="/API.html#修改群员资料" title="修改群员资料" class="sidebar-link">修改群员资料</a></li></ul></li><li><a href="/API.html#戳一戳" title="戳一戳" class="sidebar-link">戳一戳</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/API.html#session配置" title="Session配置" class="sidebar-link">Session配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#获取指定session的配置" title="获取指定Session的配置" class="sidebar-link">获取指定Session的配置</a></li><li class="sidebar-sub-header"><a href="/API.html#修改指定session的配置" title="修改指定Session的配置" class="sidebar-link">修改指定Session的配置</a></li></ul></li><li><a href="/API.html#插件与console" title="插件与Console" class="sidebar-link">插件与Console</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/API.html#简介" title="简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/API.html#注册指令" title="注册指令" class="sidebar-link">注册指令</a></li><li class="sidebar-sub-header"><a href="/API.html#发送指令" title="发送指令" class="sidebar-link">发送指令</a></li><li class="sidebar-sub-header"><a href="/API.html#监听指令" title="监听指令" class="sidebar-link">监听指令</a></li><li class="sidebar-sub-header"><a href="/API.html#获取managers" title="获取Managers" class="sidebar-link">获取Managers</a></li></ul></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="api-文档参考"><a href="#api-文档参考" class="header-anchor">#</a> API 文档参考</h1> <h2 id="状态码"><a href="#状态码" class="header-anchor">#</a> 状态码</h2> <p>绝大部分API返回的数据包含一个<code>code</code>状态码,分别代表不同的状况.<br>
所有API返回状态码的意义都一致.<br>
以下是状态码表:</p> <table><thead><tr><th>状态码</th> <th>原因</th></tr></thead> <tbody><tr><td>0</td> <td>正常</td></tr> <tr><td>1</td> <td>错误的auth key</td></tr> <tr><td>2</td> <td>指定的Bot不存在</td></tr> <tr><td>3</td> <td>Session失效或不存在</td></tr> <tr><td>4</td> <td>Session未认证(未激活)</td></tr> <tr><td>5</td> <td>发送消息目标不存在(指定对象不存在)</td></tr> <tr><td>6</td> <td>指定文件不存在，出现于发送本地图片</td></tr> <tr><td>10</td> <td>无操作权限，指Bot没有对应操作的限权</td></tr> <tr><td>20</td> <td>Bot被禁言，指Bot当前无法向指定群发送消息</td></tr> <tr><td>30</td> <td>消息过长</td></tr> <tr><td>400</td> <td>错误的访问，如参数错误等</td></tr></tbody></table> <hr> <h2 id="获取插件信息"><a href="#获取插件信息" class="header-anchor">#</a> 获取插件信息</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /about
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取插件的信息，如版本号</p> <h4 id="响应"><a href="#响应" class="header-anchor">#</a> 响应</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v1.0.0&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr> <h2 id="认证与会话"><a href="#认证与会话" class="header-anchor">#</a> 认证与会话</h2> <h3 id="开始认证"><a href="#开始认证" class="header-anchor">#</a> 开始认证</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /auth
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法验证你的身份，并返回一个会话</p> <h4 id="请求"><a href="#请求" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;authKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;U9HSaDXl39ksd918273hU&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>authKey</td> <td>String</td> <td>false</td> <td>&quot;U9HSaDXl39ksd918273hU&quot;</td> <td>创建Mirai-Http-Server时生成的key，可在启动时指定或随机生成</td></tr></tbody></table> <h4 id="响应-2"><a href="#响应-2" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;session&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UnVerifiedSession&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>code</td> <td>Int</td> <td>0</td> <td>返回状态码</td></tr> <tr><td>session</td> <td>String</td> <td>&quot;UnVerifiedSession&quot;</td> <td>你的session key</td></tr></tbody></table> <h4 id="状态码-2"><a href="#状态码-2" class="header-anchor">#</a> 状态码:</h4> <table><thead><tr><th>代码</th> <th>原因</th></tr></thead> <tbody><tr><td>0</td> <td>正常</td></tr> <tr><td>1</td> <td>错误的MIRAI API HTTP auth key</td></tr></tbody></table> <p>session key 是使用以下方法必须携带的
session key 使用前必须进行校验和绑定指定的Bot，<strong>每个Session只能绑定一个Bot，但一个Bot可有多个Session</strong>
session Key 在未进行校验的情况下，一定时间后将会被自动释放</p> <h3 id="校验session"><a href="#校验session" class="header-anchor">#</a> 校验Session</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /verify
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法校验并激活你的Session，同时将Session与一个<strong>已登录</strong>的Bot绑定</p> <h4 id="请求-2"><a href="#请求-2" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UnVerifiedSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qq&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>&quot;UnVerifiedSession&quot;</td> <td>你的session key</td></tr> <tr><td>qq</td> <td>Long</td> <td>false</td> <td>123456789</td> <td>Session将要绑定的Bot的qq号</td></tr></tbody></table> <h4 id="响应-3"><a href="#响应-3" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="释放session"><a href="#释放session" class="header-anchor">#</a> 释放Session</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /release
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方式释放session及其相关资源（Bot不会被释放）
<strong>不使用的Session应当被释放，长时间（30分钟）未使用的Session将自动释放，否则Session持续保存Bot收到的消息，将会导致内存泄露(开启websocket后将不会自动释放)</strong></p> <h4 id="请求-3"><a href="#请求-3" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qq&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>qq</td> <td>Long</td> <td>false</td> <td>123456789</td> <td>与该Session绑定Bot的QQ号码</td></tr></tbody></table> <h4 id="响应-4"><a href="#响应-4" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>SessionKey与Bot 对应错误时将会返回状态码2：指定的Bot不存在</p></blockquote> <hr> <h2 id="消息发送与撤回"><a href="#消息发送与撤回" class="header-anchor">#</a> 消息发送与撤回</h2> <h3 id="发送好友消息"><a href="#发送好友消息" class="header-anchor">#</a> 发送好友消息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /sendFriendMessage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法向指定好友发送消息</p> <h4 id="请求-4"><a href="#请求-4" class="header-anchor">#</a> 请求</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello\n&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://i0.hdslb.com/bfs/album/67fc4e6b417d9c68ef98ba71d5e79505bbad97a1.png&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>target</td> <td>Long</td> <td>true(false)</td> <td>987654321</td> <td>可选，发送消息目标好友的QQ号</td></tr> <tr><td>qq</td> <td>Long</td> <td>true</td> <td>987654321</td> <td>可选，target与qq中需要有一个参数不为空，当target不为空时qq将被忽略，同target</td></tr> <tr><td>quote</td> <td>Int</td> <td>true</td> <td>135798642</td> <td>引用一条消息的messageId进行回复</td></tr> <tr><td>messageChain</td> <td>Array</td> <td>false</td> <td>[]</td> <td>消息链，是一个消息对象构成的数组</td></tr></tbody></table> <h4 id="响应-5"><a href="#响应-5" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageId&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span> <span class="token comment">// 一个Int类型属性，标识本条消息，用于撤回和引用回复</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="发送临时会话消息"><a href="#发送临时会话消息" class="header-anchor">#</a> 发送临时会话消息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /sendTempMessage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法向临时会话对象发送消息</p> <h4 id="请求-5"><a href="#请求-5" class="header-anchor">#</a> 请求</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qq&quot;</span><span class="token operator">:</span> <span class="token number">1413525235</span><span class="token punctuation">,</span>
    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;hello\n&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;world&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>qq</td> <td>Long</td> <td>false</td> <td>987654321</td> <td>临时会话对象QQ号</td></tr> <tr><td>group</td> <td>Long</td> <td>false</td> <td>987654321</td> <td>临时会话群号</td></tr> <tr><td>quote</td> <td>Int</td> <td>true</td> <td>135798642</td> <td>引用一条消息的messageId进行回复</td></tr> <tr><td>messageChain</td> <td>Array</td> <td>false</td> <td>[]</td> <td>消息链，是一个消息对象构成的数组</td></tr></tbody></table> <h4 id="响应-6"><a href="#响应-6" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageId&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span> <span class="token comment">// 一个Int类型属性，标识本条消息，用于撤回和引用回复</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="发送群消息"><a href="#发送群消息" class="header-anchor">#</a> 发送群消息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /sendGroupMessage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法向指定群发送消息</p> <h4 id="请求-6"><a href="#请求-6" class="header-anchor">#</a> 请求</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello\n&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://i0.hdslb.com/bfs/album/67fc4e6b417d9c68ef98ba71d5e79505bbad97a1.png&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>target</td> <td>Long</td> <td>false(true)</td> <td>987654321</td> <td>可选，发送消息目标群的群号</td></tr> <tr><td>group</td> <td>Long</td> <td>true</td> <td>987654321</td> <td>可选，target与group中需要有一个参数不为空，当target不为空时group将被忽略，同target</td></tr> <tr><td>quote</td> <td>Int</td> <td>true</td> <td>135798642</td> <td>引用一条消息的messageId进行回复</td></tr> <tr><td>messageChain</td> <td>Array</td> <td>false</td> <td>[]</td> <td>消息链，是一个消息对象构成的数组</td></tr></tbody></table> <h4 id="响应-7"><a href="#响应-7" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageId&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span> <span class="token comment">// 一个Int类型属性，标识本条消息，用于撤回和引用回复</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="撤回消息"><a href="#撤回消息" class="header-anchor">#</a> 撤回消息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /recall
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法撤回指定消息。对于bot发送的消息，有2分钟时间限制。对于撤回群聊中群员的消息，需要有相应权限</p> <h4 id="请求-7"><a href="#请求-7" class="header-anchor">#</a> 请求</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>target</td> <td>Int</td> <td>false</td> <td>987654321</td> <td>需要撤回的消息的messageId</td></tr></tbody></table> <h4 id="响应-8"><a href="#响应-8" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="发送图片消息-通过url"><a href="#发送图片消息-通过url" class="header-anchor">#</a> 发送图片消息（通过URL）</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /sendImageMessage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法向指定对象（群或好友）发送图片消息
<strong>除非需要通过此手段获取imageId，否则不推荐使用该接口</strong></p> <h4 id="请求-8"><a href="#请求-8" class="header-anchor">#</a> 请求</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSession&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qq&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span><span class="token punctuation">,</span>
    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;https://xxx.yyy.zzz/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://aaa.bbb.ccc/&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>target</td> <td>Long</td> <td>true</td> <td>987654321</td> <td>发送对象的QQ号或群号，可能存在歧义</td></tr> <tr><td>qq</td> <td>Long</td> <td>true</td> <td>123456789</td> <td>发送对象的QQ号</td></tr> <tr><td>group</td> <td>Long</td> <td>true</td> <td>987654321</td> <td>发送对象的群号</td></tr> <tr><td>urls</td> <td>Array</td> <td>false</td> <td>[]</td> <td>是一个url字符串构成的数组</td></tr></tbody></table> <blockquote><p>当qq和group同时存在时，表示发送临时会话图片，qq为临时会话对象QQ号，group为临时会话发起的群号</p></blockquote> <h4 id="响应-9"><a href="#响应-9" class="header-anchor">#</a> 响应:</h4> <p>一个包含图片imageId的数组:</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span>
    <span class="token string">&quot;{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}.mirai&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;{YYYYYYYY-YYYY-YYYY-YYYY-YYYYYYYYYYYY}.mirai&quot;</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="多媒体内容上传"><a href="#多媒体内容上传" class="header-anchor">#</a> 多媒体内容上传</h2> <p><strong>如果发送错误的请求,API将不会返回任何数据,也不会断开连接.</strong> 请确保发送了正确的<code>multipart</code>请求.</p> <h3 id="图片文件上传"><a href="#图片文件上传" class="header-anchor">#</a> 图片文件上传</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /uploadImage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法上传图片文件至服务器并返回ImageId</p> <h4 id="请求-9"><a href="#请求-9" class="header-anchor">#</a> 请求</h4> <p>Content-Type：multipart/form-data</p> <table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>type</td> <td>String</td> <td>false</td> <td>&quot;friend &quot;</td> <td>&quot;friend&quot; 或 &quot;group&quot; 或 &quot;temp&quot;</td></tr> <tr><td>img</td> <td>File</td> <td>false</td> <td>-</td> <td>图片文件</td></tr></tbody></table> <h4 id="响应-10"><a href="#响应-10" class="header-anchor">#</a> 响应:</h4> <p>图片的imageId,好友图片与群聊图片Id不同.</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;imageId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}.mirai&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="语音文件上传"><a href="#语音文件上传" class="header-anchor">#</a> 语音文件上传</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /uploadVoice
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法上传语音文件至服务器并返回VoiceId</p> <h4 id="请求-10"><a href="#请求-10" class="header-anchor">#</a> 请求</h4> <p>Content-Type：multipart/form-data</p> <table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>type</td> <td>String</td> <td>false</td> <td>&quot;group&quot;</td> <td>当前仅支持 &quot;group&quot;</td></tr> <tr><td>voice</td> <td>File</td> <td>false</td> <td>-</td> <td>语音文件</td></tr></tbody></table> <h4 id="响应-11"><a href="#响应-11" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;voiceId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.amr&quot;</span><span class="token punctuation">,</span> <span class="token comment">//语音的VoiceId</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /uploadFileAndSend
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法上传文件至群/好友并返回FileId</p> <h4 id="请求-11"><a href="#请求-11" class="header-anchor">#</a> 请求</h4> <p>Content-Type：multipart/form-data</p> <table><thead><tr><th>名字</th> <th>类型</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>String</td> <td>false</td> <td>YourSession</td> <td>已经激活的Session</td></tr> <tr><td>type</td> <td>String</td> <td>false</td> <td>&quot;Group&quot;</td> <td>当前仅支持 &quot;Group&quot;</td></tr> <tr><td>path</td> <td>String</td> <td>false</td> <td>文件夹/文件名</td> <td>文件上传目录与名字</td></tr> <tr><td>file</td> <td>File</td> <td>false</td> <td>-</td> <td>文件内容</td></tr></tbody></table> <h4 id="响应-12"><a href="#响应-12" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span> <span class="token comment">//文件唯一id</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="接收消息与事件"><a href="#接收消息与事件" class="header-anchor">#</a> 接收消息与事件</h2> <h3 id="获取bot收到的消息和事件"><a href="#获取bot收到的消息和事件" class="header-anchor">#</a> 获取Bot收到的消息和事件</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /fetchMessage?sessionKey=YourSessionKey&amp;count=10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收到的最老消息和最老各类事件(会从MiraiApiHttp消息记录中删除)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /fetchLatestMessage?sessionKey=YourSessionKey&amp;count=10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收到的最新消息和最新各类事件(会从MiraiApiHttp消息记录中删除)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /peekMessage?sessionKey=YourSessionKey&amp;count=10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收到的最老消息和最老各类事件(不会从MiraiApiHttp消息记录中删除)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /peekLatestMessage?sessionKey=YourSessionKey&amp;count=10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收到的最新消息和最新各类事件(不会从MiraiApiHttp消息记录中删除)</p> <h4 id="请求-12"><a href="#请求-12" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr> <tr><td>count</td> <td>false</td> <td>10</td> <td>获取消息和事件的数量</td></tr></tbody></table> <h4 id="响应-13"><a href="#响应-13" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GroupMessage&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// 消息类型：GroupMessage或FriendMessage或TempMessage或各类Event</span>
      <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>              <span class="token comment">// 消息链，是一个消息对象构成的数组</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Source&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
          <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral牛逼&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                      <span class="token comment">// 发送者信息</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>             <span class="token comment">// 发送者的QQ号码</span>
          <span class="token property">&quot;memberName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;化腾&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// 发送者的群名片</span>
          <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span><span class="token punctuation">,</span>      <span class="token comment">// 发送者的群限权：OWNER、ADMINISTRATOR或MEMBER</span>
          <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                   <span class="token comment">// 消息发送群的信息</span>
              <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span><span class="token punctuation">,</span>        <span class="token comment">// 发送群的群号</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral Technology&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 发送群的群名称</span>
              <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>      <span class="token comment">// 发送群中，Bot的群限权</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FriendMessage&quot;</span><span class="token punctuation">,</span>         <span class="token comment">// 消息类型：GroupMessage或FriendMessage或TempMessage或各类Event</span>
      <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token comment">// 消息链，是一个消息对象构成的数组</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Source&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
          <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral牛逼&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                      <span class="token comment">// 发送者信息</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span><span class="token punctuation">,</span>            <span class="token comment">// 发送者的QQ号码</span>
          <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>              <span class="token comment">// 发送者的昵称</span>
          <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>                 <span class="token comment">// 发送者的备注</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MemberMuteEvent&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// 消息类型：GroupMessage或FriendMessage或TempMessage或各类Event</span>
      <span class="token property">&quot;durationSeconds&quot;</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
      <span class="token property">&quot;member&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
          <span class="token property">&quot;memberName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;禁言对象&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral Technology&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span> 
          <span class="token property">&quot;memberName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群主大人&quot;</span><span class="token punctuation">,</span> 
          <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OWNER&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral Technology&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h3 id="通过messageid获取一条被缓存的消息"><a href="#通过messageid获取一条被缓存的消息" class="header-anchor">#</a> 通过messageId获取一条被缓存的消息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /messageFromId?sessionKey=YourSessionKey&amp;id=1234567890
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收到的消息和各类事件</p> <h4 id="请求-13"><a href="#请求-13" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr> <tr><td>id</td> <td>false</td> <td>1234567890</td> <td>获取消息的messageId</td></tr></tbody></table> <h4 id="响应-14"><a href="#响应-14" class="header-anchor">#</a> 响应:</h4> <p><strong>当该messageId没有被缓存或缓存失效时，返回code 5(指定对象不存在)</strong></p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FriendMessage&quot;</span><span class="token punctuation">,</span>         <span class="token comment">// 消息类型：GroupMessage或FriendMessage或TempMessage或各类Event</span>
        <span class="token property">&quot;messageChain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token comment">// 消息链，是一个消息对象构成的数组</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Source&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
            <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Plain&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Miral牛逼&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                      <span class="token comment">// 发送者信息</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1234567890</span><span class="token punctuation">,</span>            <span class="token comment">// 发送者的QQ号码</span>
            <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>              <span class="token comment">// 发送者的昵称</span>
            <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>                 <span class="token comment">// 发送者的备注</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="查看缓存的消息总数"><a href="#查看缓存的消息总数" class="header-anchor">#</a> 查看缓存的消息总数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /countMessage?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用此方法获取bot接收并缓存的消息总数，注意不包含被删除的。</p> <h4 id="请求-14"><a href="#请求-14" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-15"><a href="#响应-15" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token number">520</span><span class="token punctuation">,</span>   
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="通过websocket"><a href="#通过websocket" class="header-anchor">#</a> 通过WebSocket</h3> <h4 id="接收消息"><a href="#接收消息" class="header-anchor">#</a> 接收消息</h4> <p>监听该接口，插件将推送Bot收到的消息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[ws] /message?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-15"><a href="#请求-15" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-16"><a href="#响应-16" class="header-anchor">#</a> 响应</h4> <div class="language-josn5 line-numbers-mode"><pre class="language-text"><code>{
    &quot;type&quot;: &quot;GroupMessage&quot;,        // 消息类型：GroupMessage或FriendMessage或TempMessage或各类Event
	&quot;messageChain&quot;: [              // 消息链，是一个消息对象构成的数组
      {
	    &quot;type&quot;: &quot;Source&quot;,
	    &quot;id&quot;: 123456,
        &quot;time&quot;: 123456789
	  },
      {
        &quot;type&quot;: &quot;Plain&quot;,
        &quot;text&quot;: &quot;Miral牛逼&quot;
      }
    ],
    &quot;sender&quot;: {                      // 发送者信息
        &quot;id&quot;: 123456789,             // 发送者的QQ号码
        &quot;memberName&quot;: &quot;化腾&quot;,        // 发送者的群名片
        &quot;permission&quot;: &quot;MEMBER&quot;,      // 发送者的群限权：OWNER、ADMINISTRATOR或MEMBER
        &quot;group&quot;: {                   // 消息发送群的信息
            &quot;id&quot;: 1234567890,        // 发送群的群号
            &quot;name&quot;: &quot;Miral Technology&quot;, // 发送群的群名称
            &quot;permission&quot;: &quot;MEMBER&quot;      // 发送群中，Bot的群限权
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="接收事件"><a href="#接收事件" class="header-anchor">#</a> 接收事件</h4> <p>监听该接口，插件将推送Bot收到的事件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[ws] /event?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-16"><a href="#请求-16" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-17"><a href="#响应-17" class="header-anchor">#</a> 响应</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BotOfflineEventActive&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qq&quot;</span><span class="token operator">:</span> <span class="token number">123456</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="同时接收事件与消息"><a href="#同时接收事件与消息" class="header-anchor">#</a> 同时接收事件与消息</h4> <p>监听该接口，插件将推送Bot收到的事件和消息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[ws] /all?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-17"><a href="#请求-17" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-18"><a href="#响应-18" class="header-anchor">#</a> 响应</h4> <p>参考上文</p> <hr> <h2 id="好友与群-成员-列表"><a href="#好友与群-成员-列表" class="header-anchor">#</a> 好友与群(成员)列表</h2> <h3 id="获取好友列表"><a href="#获取好友列表" class="header-anchor">#</a> 获取好友列表</h3> <p>使用此方法获取bot的好友列表</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /friendList?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-18"><a href="#请求-18" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-19"><a href="#响应-19" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="获取群列表"><a href="#获取群列表" class="header-anchor">#</a> 获取群列表</h3> <p>使用此方法获取bot的群列表</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /groupList?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-19"><a href="#请求-19" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-20"><a href="#响应-20" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;群名1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;群名2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="获取群成员列表"><a href="#获取群成员列表" class="header-anchor">#</a> 获取群成员列表</h3> <p>使用此方法获取bot指定群种的成员列表</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /memberList?sessionKey=YourSessionKey&amp;target=123456789
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-20"><a href="#请求-20" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>YourSessionKey</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>123456789</td> <td>指定群的群号</td></tr></tbody></table> <h4 id="响应-21"><a href="#响应-21" class="header-anchor">#</a> 响应:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1234567890</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span><span class="token string">&quot;MEMBER&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">12345</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;群名1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">9876543210</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span><span class="token string">&quot;OWNER&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">54321</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;群名2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MEMBER&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><hr> <h2 id="群管理"><a href="#群管理" class="header-anchor">#</a> 群管理</h2> <h3 id="禁言群成员"><a href="#禁言群成员" class="header-anchor">#</a> 禁言群成员</h3> <p>使用此方法指定群禁言指定群员（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /mute
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-21"><a href="#请求-21" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberId&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1800</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>memberId</td> <td>false</td> <td>Long</td> <td>987654321</td> <td>指定群员QQ号</td></tr> <tr><td>time</td> <td>true</td> <td>Int</td> <td>1800</td> <td>禁言时长，单位为秒，最多30天，默认为0</td></tr></tbody></table> <h4 id="响应-返回统一状态码"><a href="#响应-返回统一状态码" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="解除群成员禁言"><a href="#解除群成员禁言" class="header-anchor">#</a> 解除群成员禁言</h3> <p>使用此方法指定群解除群成员禁言（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /unmute
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-22"><a href="#请求-22" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberId&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="响应-22"><a href="#响应-22" class="header-anchor">#</a> 响应</h4> <p>同群禁言群成员</p> <h3 id="移除群成员"><a href="#移除群成员" class="header-anchor">#</a> 移除群成员</h3> <p>使用此方法移除指定群成员（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /kick
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-23"><a href="#请求-23" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberId&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;您已被移出群聊&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>memberId</td> <td>false</td> <td>Long</td> <td>987654321</td> <td>指定群员QQ号</td></tr> <tr><td>msg</td> <td>true</td> <td>String</td> <td>&quot;&quot;</td> <td>信息</td></tr></tbody></table> <h4 id="响应-23"><a href="#响应-23" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="退出群聊"><a href="#退出群聊" class="header-anchor">#</a> 退出群聊</h3> <p>使用此方法使Bot退出群聊</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-24"><a href="#请求-24" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>退出的群号</td></tr></tbody></table> <h4 id="响应-24"><a href="#响应-24" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>bot为该群群主时退出失败并返回code 10(无操作权限)</p></blockquote> <h3 id="全体禁言"><a href="#全体禁言" class="header-anchor">#</a> 全体禁言</h3> <p>使用此方法令指定群进行全体禁言（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /muteAll
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-25"><a href="#请求-25" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr></tbody></table> <h4 id="响应-25"><a href="#响应-25" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="解除全体禁言"><a href="#解除全体禁言" class="header-anchor">#</a> 解除全体禁言</h3> <p>使用此方法令指定群解除全体禁言（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /unmuteAll
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-26"><a href="#请求-26" class="header-anchor">#</a> 请求:</h4> <p>同全体禁言</p> <h4 id="响应-26"><a href="#响应-26" class="header-anchor">#</a> 响应</h4> <p>同全体禁言</p> <h3 id="获取群设置"><a href="#获取群设置" class="header-anchor">#</a> 获取群设置</h3> <p>使用此方法获取群设置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /groupConfig?sessionKey=YourSessionKey&amp;target=123456789
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-27"><a href="#请求-27" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr></tbody></table> <h4 id="响应-27"><a href="#响应-27" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群名称&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;announcement&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群公告&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;confessTalk&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowMemberInvite&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;autoApprove&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;anonymousChat&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="修改群设置"><a href="#修改群设置" class="header-anchor">#</a> 修改群设置</h3> <p>使用此方法修改群设置（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /groupConfig
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意:请求头部需要加上<code>charset=utf-8</code>,否则可能导致乱码.</p> <h4 id="请求-28"><a href="#请求-28" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群名称&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;announcement&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群公告&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;confessTalk&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;allowMemberInvite&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoApprove&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;anonymousChat&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>config</td> <td>false</td> <td>Object</td> <td>{}</td> <td>群设置</td></tr> <tr><td>name</td> <td>true</td> <td>String</td> <td>&quot;Name&quot;</td> <td>群名</td></tr> <tr><td>announcement</td> <td>true</td> <td>String</td> <td>&quot;Announcement&quot;</td> <td>群公告</td></tr> <tr><td>confessTalk</td> <td>true</td> <td>Boolean</td> <td>true</td> <td>是否开启坦白说</td></tr> <tr><td>allowMemberInvite</td> <td>true</td> <td>Boolean</td> <td>true</td> <td>是否允许群员邀请</td></tr> <tr><td>autoApprove</td> <td>true</td> <td>Boolean</td> <td>true</td> <td>是否开启自动审批入群</td></tr> <tr><td>anonymousChat</td> <td>true</td> <td>Boolean</td> <td>true</td> <td>是否允许匿名聊天</td></tr></tbody></table> <h4 id="响应-返回统一状态码-2"><a href="#响应-返回统一状态码-2" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="获取群员资料"><a href="#获取群员资料" class="header-anchor">#</a> 获取群员资料</h3> <p>使用此方法获取群员资料</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[Get] /memberInfo?sessionKey=YourSessionKey&amp;target=123456789
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-29"><a href="#请求-29" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>memberId</td> <td>false</td> <td>Long</td> <td>987654321</td> <td>群员QQ号</td></tr></tbody></table> <h4 id="响应-28"><a href="#响应-28" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群名片&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nick&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群员昵称&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;specialTitle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群头衔&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="修改群员资料"><a href="#修改群员资料" class="header-anchor">#</a> 修改群员资料</h3> <p>使用此方法修改群员资料（需要有相关限权）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /memberInfo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-30"><a href="#请求-30" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456789</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memberId&quot;</span><span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群名片&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;specialTitle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;群头衔&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>memberId</td> <td>false</td> <td>Long</td> <td>987654321</td> <td>群员QQ号</td></tr> <tr><td>info</td> <td>false</td> <td>Object</td> <td>{}</td> <td>群员资料</td></tr> <tr><td>name</td> <td>true</td> <td>String</td> <td>&quot;Name&quot;</td> <td>群名片，即群昵称</td></tr> <tr><td>specialTitle</td> <td>true</td> <td>String</td> <td>&quot;Title&quot;</td> <td>群头衔</td></tr></tbody></table> <h4 id="响应-返回统一状态码-3"><a href="#响应-返回统一状态码-3" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <p>##群文件管理
####获取群文件列表</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[GET] /groupFileList?sessionKey=YourSessionKey&amp;target=123456789&amp;dir=dir
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>dir</td> <td>true</td> <td>String</td> <td>dir</td> <td>指定查询目录，不填为根目录</td></tr></tbody></table> <p>####响应</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;File Name&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/path/File Name&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;isFile&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//是否为文件</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;File Name&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/path/File Name&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;isFile&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token comment">//...</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>####获取群文件详细信息</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[GET] /groupFileInfo?sessionKey=YourSessionKey&amp;target=123456789&amp;id=/xxx-xxx-xxx-xxx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>指定群的群号</td></tr> <tr><td>id</td> <td>false</td> <td>String</td> <td>/xxx-xxx-xxx-xxx</td> <td>文件唯一ID</td></tr></tbody></table> <p>####响应</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;File Name&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件名字</span>
  <span class="token property">&quot;path&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/path/File Name&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件绝对位置</span>
  <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件唯一ID</span>
  <span class="token property">&quot;length&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//文件长度</span>
  <span class="token property">&quot;downloadTimes&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//下载次数</span>
  <span class="token property">&quot;uploaderId&quot;</span> <span class="token operator">:</span> <span class="token number">987654321</span><span class="token punctuation">,</span> <span class="token comment">//上传者QQ</span>
  <span class="token property">&quot;uploadTime&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//上传时间</span>
  <span class="token property">&quot;lastModifyTime&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//最后修改时间</span>
  <span class="token property">&quot;downloadUrl&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://www.com&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件下载链接</span>
  <span class="token property">&quot;sha1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;85ad7a14d51a&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件sha1值</span>
  <span class="token property">&quot;md5&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;d4wa84d6aw1d4ad57&quot;</span> <span class="token comment">//文件md5值</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>####重命名群文件/目录</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[POST] /groupFileRename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
   <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;rename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;new File Name&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="响应-返回统一状态码-4"><a href="#响应-返回统一状态码-4" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>####移动群文件</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[POST] /groupFileMove
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
   <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;movePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;movePath&quot;</span> <span class="token comment">//移动到的目录，根目录为/，目录不存在时自动创建</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="响应-返回统一状态码-5"><a href="#响应-返回统一状态码-5" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>####删除群文件/目录</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[POST] /groupFileDelete
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
   <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/xxx-xxx-xxx-xxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="响应-返回统一状态码-6"><a href="#响应-返回统一状态码-6" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>##设置群精华消息</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[POST] /setEssence
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>####请求</p> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Int</td> <td>123456789</td> <td>将被设置为精华消息ID</td></tr></tbody></table> <h4 id="响应-返回统一状态码-7"><a href="#响应-返回统一状态码-7" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="戳一戳"><a href="#戳一戳" class="header-anchor">#</a> 戳一戳</h2> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[POST] /sendNudge
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-31"><a href="#请求-31" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token number">123456</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token number">654321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Group&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>target</td> <td>false</td> <td>Long</td> <td>123456789</td> <td>戳一戳的目标, QQ号, 可以为 bot QQ号</td></tr> <tr><td>subject</td> <td>false</td> <td>Long</td> <td>987654321</td> <td>戳一戳接受主体(上下文), 戳一戳信息会发送至该主体, 为群号/好友QQ号</td></tr> <tr><td>kind</td> <td>false</td> <td>Enum</td> <td>&quot;Group&quot;</td> <td>上下文类型, 可选值 <code>Friend</code>, <code>Group</code>.</td></tr></tbody></table> <h4 id="响应-返回统一状态码-8"><a href="#响应-返回统一状态码-8" class="header-anchor">#</a> 响应: 返回统一状态码</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="session配置"><a href="#session配置" class="header-anchor">#</a> Session配置</h2> <h3 id="获取指定session的配置"><a href="#获取指定session的配置" class="header-anchor">#</a> 获取指定Session的配置</h3> <p>使用此方法获取指定Session的配置信息，注意该配置仅在Session范围有效</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /config?sessionKey=YourSessionKey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-32"><a href="#请求-32" class="header-anchor">#</a> 请求:</h4> <table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>YourSessionKey</td> <td>你的session key</td></tr></tbody></table> <h4 id="响应-29"><a href="#响应-29" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;cacheSize&quot;</span><span class="token operator">:</span> <span class="token number">4096</span><span class="token punctuation">,</span>
    <span class="token property">&quot;enableWebsocket&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="修改指定session的配置"><a href="#修改指定session的配置" class="header-anchor">#</a> 修改指定Session的配置</h3> <p>使用此方法设置指定Session的配置信息，注意该配置是Session范围有效</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[Post] /config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-33"><a href="#请求-33" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sessionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YourSessionKey&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cacheSize&quot;</span><span class="token operator">:</span> <span class="token number">4096</span><span class="token punctuation">,</span>
    <span class="token property">&quot;enableWebsocket&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>sessionKey</td> <td>false</td> <td>String</td> <td>&quot;YourSessionKey&quot;</td> <td>你的session key</td></tr> <tr><td>cacheSize</td> <td>true</td> <td>Int</td> <td>123456789</td> <td>缓存大小</td></tr> <tr><td>enableWebsocket</td> <td>true</td> <td>Boolean</td> <td>false</td> <td>是否开启Websocket</td></tr></tbody></table> <hr> <h2 id="插件与console"><a href="#插件与console" class="header-anchor">#</a> 插件与Console</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p><code>Mirai-console</code>通过指令执行任务，如<code>/login qq password</code>进行登录，<code>Mirai-api-http</code>支持通过<code>POST</code>请求发送指令和注册指令，
帮助第三方开发语言进行符合<code>Mirai-console</code>规范的插件开发</p> <p><code>Mirai-console</code>通过<code>manager</code>列表进行对<code>bot</code>任务的鉴权。尽量避免各插件使用自己的鉴权方式而产生重复配置的混乱情况出现。</p> <h3 id="注册指令"><a href="#注册指令" class="header-anchor">#</a> 注册指令</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /command/register
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-34"><a href="#请求-34" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;authKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;U9HSaDXl39ksd918273hU&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SignIn&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;usage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/login qq password&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>authKey</td> <td>false</td> <td>String</td> <td>&quot;YourAuthKey&quot;</td> <td>你的authKey</td></tr> <tr><td>name</td> <td>false</td> <td>String</td> <td>&quot;login&quot;</td> <td>指令名</td></tr> <tr><td>alias</td> <td>false</td> <td>String[]</td> <td>-</td> <td>指令别名</td></tr> <tr><td>description</td> <td>false</td> <td>String</td> <td>&quot;&quot;</td> <td>指令描述</td></tr> <tr><td>usage</td> <td>true</td> <td>String</td> <td>&quot;Name&quot;</td> <td>指令描述，会在指令执行错误时显示</td></tr></tbody></table> <h4 id="响应-30"><a href="#响应-30" class="header-anchor">#</a> 响应</h4> <p>按普通文本处理</p> <h3 id="发送指令"><a href="#发送指令" class="header-anchor">#</a> 发送指令</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[POST] /command/send
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="请求-35"><a href="#请求-35" class="header-anchor">#</a> 请求:</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;authKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;U9HSaDXl39ksd918273hU&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ogin&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><table><thead><tr><th>名字</th> <th>可选</th> <th>类型</th> <th>举例</th> <th>说明</th></tr></thead> <tbody><tr><td>authKey</td> <td>false</td> <td>String</td> <td>&quot;YourAuthKey&quot;</td> <td>你的authKey</td></tr> <tr><td>name</td> <td>false</td> <td>String</td> <td>123456789</td> <td>指令名</td></tr> <tr><td>args</td> <td>false</td> <td>String[]</td> <td>987654321</td> <td>指令参数</td></tr></tbody></table> <h4 id="响应-31"><a href="#响应-31" class="header-anchor">#</a> 响应</h4> <p>按普通文本处理</p> <h3 id="监听指令"><a href="#监听指令" class="header-anchor">#</a> 监听指令</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[ws] /command?authKey=U9HSaDXl39ksd918273hU
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="响应-32"><a href="#响应-32" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commandName&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token number">54321</span><span class="token punctuation">,</span>
    <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg2&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>当指令通过好友消息发送时，sender为好友QQ号，group为0</p> <p>当指令通过群组消息发送时，sender为发送人QQ号，group为群号</p> <p>当指令通过其他方式发送时，如控制台、HTTP接口等，sender和group均为0</p></blockquote> <h3 id="获取managers"><a href="#获取managers" class="header-anchor">#</a> 获取Managers</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>[GET] /managers?qq=123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="响应-33"><a href="#响应-33" class="header-anchor">#</a> 响应</h4> <div class="language-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">[</span><span class="token number">123456789</span><span class="token punctuation">,</span> <span class="token number">987654321</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>响应Manager的qq号数组，当QQ号不存在时返回状态码(StateCode 2)</p></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/project-mirai/mirai-api-http/edit/master/docs/API.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">4/3/2021, 11:24:30 AM</span></div></footer> <!----> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.d3dd7f88.js" defer></script><script src="/assets/js/2.09547494.js" defer></script><script src="/assets/js/6.24358ea8.js" defer></script><script src="/assets/js/3.1b65837f.js" defer></script>
  </body>
</html>